name: PR Description Validation

on:
  pull_request:
    types:
      - opened
      - synchronize
      - edited

jobs:
  pr-validation:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Validate PR Description
        run: |
          templateFile=".github/workflows/pull_request_template.md"
          prDescription="$(cat $GITHUB_EVENT_PATH | jq -r '.pull_request.body')"
          templateContent="$(cat $templateFile)"

          # Check for partial match with the template
          if echo "$prDescription" | grep -qF "$templateContent"; then
            echo "PR description partially matches the template."
          else
            echo "Invalid PR description. Please include some of the template content in your description."
            exit 1
          fi
